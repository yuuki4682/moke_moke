<div class="container">
  <div class="row">
    <div class="col-5 mx-auto">
      
      <div class="border p-1 text-center mb-3">
        <h4 class="m-0"><%= @user.name %>さんとのチャットルーム</h4>
      </div>
      
      <div class="border p-2 bg-light rounded">
        <% @chats.each do |chat| %>
          <% if chat.user == current_user %>
            <div class="d-flex">
              <div class="card ml-auto my-1 p-1">
                <%= chat.message %>
              </div>
              <div>
                <%= image_tag chat.user.get_profile_image(30,30), class:"rounded-circle my-1 ml-1" %>
              </div>
            </div>
          <% else %>
            <div class="d-flex">
              <div>
                <%= image_tag chat.user.get_profile_image(30,30), class:"rounded-circle my-1 mr-1" %>
              </div>
              <div class="card my-1 p-1 mr-2">
                <%= chat.message %>
              </div>
              <div id="report_chat_btn_<%= chat.id %>" class="mt-auto">
                <%= render 'public/reports/chat_btn', chat: chat %>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
      
      <div class="mt-3 p-1">
        <%= form_with model: @chat do |f| %>
          <div class="form-group d-flex">
            <%= f.text_field :message, class:"form-control mr-1", placeholder:"メッセージを入力してください" %>
            <%= f.hidden_field :room_id, :value => @room.id %>
            <%= f.submit '送信', class:"btn btn-outline-secondary" %>
          </div>
        <% end %>
      </div>
      
    </div>
  </div>
</div>